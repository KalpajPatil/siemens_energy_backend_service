2025-11-03 12:52:01.341 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: u4v7w8x9
2025-11-03 12:52:01.360 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 12:52:01.364 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 12:52:01.378 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - check-out event = ea457028-ad33-4225-a8a4-31b825e98acd
2025-11-03 12:52:01.507 [http-nio-8084-exec-2] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 12:52:01.568 [http-nio-8084-exec-2] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 12:52:01.643 [http-nio-8084-exec-2] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 12:52:01.721 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 12:52:01.724 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 12:52:01.724 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762170721721
2025-11-03 12:52:01.786 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 12:52:01.815 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 14 with epoch 0
2025-11-03 12:52:02.110 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: u4v7w8x9
2025-11-03 12:52:02.110 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: u4v7w8x9
2025-11-03 12:52:02.153 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:52:02.153 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:52:02.173 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:52:02.173 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:52:02.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: u4v7w8x9
2025-11-03 12:52:02.176 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: u4v7w8x9
2025-11-03 12:52:02.253 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 12:52:02.253 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:52:02.278 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:52:02.279 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:52:02.290 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=u4v7w8x9}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:52:02.290 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.02 hours today, to=u4v7w8x9@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:52:02.572 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee u4v7w8x9
2025-11-03 12:52:02.572 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to u4v7w8x9@company.com - Daily Work Summary - 2025-11-03
2025-11-03 12:52:02.572 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for u4v7w8x9@company.com
2025-11-03 12:52:02.573 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee u4v7w8x9
2025-11-03 12:52:02.622 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:52:02.622 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:52:02.625 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:52:02.625 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:52:02.631 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:52:02.631 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:52:02.649 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:52:02.641984400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 454 ms
2025-11-03 12:52:02.649 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:52:02.642981500+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 454 ms
2025-11-03 12:52:04.659 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:52:04.659 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:52:04.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: u4v7w8x9
2025-11-03 12:52:04.663 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: u4v7w8x9
2025-11-03 12:52:04.664 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:52:04.665 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 12:52:04.665 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:52:04.666 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=u4v7w8x9}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:52:04.668 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:52:04.669 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.02 hours today, to=u4v7w8x9@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:52:04.682 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee u4v7w8x9
2025-11-03 12:52:04.682 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to u4v7w8x9@company.com - Daily Work Summary - 2025-11-03
2025-11-03 12:52:04.684 [http-nio-8084-exec-6] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for u4v7w8x9@company.com
2025-11-03 12:52:04.690 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:52:04.692 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:52:04.696 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:52:04.699 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:52:04.699813200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 35 ms
2025-11-03 12:52:04.703 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: u4v7w8x9, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 12:52:04.704 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: u4v7w8x9, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 12:52:07.893 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:52:07.894 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:52:07.949 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: u4v7w8x9
2025-11-03 12:52:07.949 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 12:52:07.949 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T12:52:07.949675500+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3286 ms
2025-11-03 12:59:03.802 [http-nio-8084-exec-4] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: y0z1a2b3
2025-11-03 12:59:03.813 [http-nio-8084-exec-4] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 12:59:03.813 [http-nio-8084-exec-4] INFO  c.s.clock.service.AttendanceService - hours worked = 0.15
2025-11-03 12:59:03.814 [http-nio-8084-exec-4] INFO  c.s.clock.service.AttendanceService - check-out event = 995f03f2-d899-42f0-b83e-5534f9ae78db
2025-11-03 12:59:03.840 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: y0z1a2b3
2025-11-03 12:59:03.842 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:59:03.839 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: y0z1a2b3
2025-11-03 12:59:03.843 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:03.844 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:59:03.844 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:03.844 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 12:59:03.844 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: y0z1a2b3
2025-11-03 12:59:03.845 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:03.846 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 12:59:03.847 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:03.847 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:03.847 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.15 hours today, to=y0z1a2b3@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:03.848 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=y0z1a2b3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:03.863 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to y0z1a2b3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 12:59:03.863 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee y0z1a2b3
2025-11-03 12:59:03.864 [http-nio-8084-exec-6] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee y0z1a2b3
2025-11-03 12:59:03.868 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:03.869 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:03.872 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:03.875 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:03.875476200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 27 ms
2025-11-03 12:59:04.607 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:59:04.608 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:04.623 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: y0z1a2b3
2025-11-03 12:59:04.624 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 12:59:04.624 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T12:59:04.624200200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 779 ms
2025-11-03 12:59:05.887 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:05.887 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 12:59:05.888 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:05.891 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:05.892 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=y0z1a2b3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:05.899 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee y0z1a2b3
2025-11-03 12:59:05.900 [http-nio-8084-exec-8] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee y0z1a2b3
2025-11-03 12:59:05.909 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:05.911 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:05.912 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:05.915 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:05.915682600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 25 ms
2025-11-03 12:59:07.923 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:07.924 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 12:59:07.925 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:07.926 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:07.926 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=y0z1a2b3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:07.935 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee y0z1a2b3
2025-11-03 12:59:07.935 [http-nio-8084-exec-7] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee y0z1a2b3
2025-11-03 12:59:07.940 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:07.941 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:07.948 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:07.949 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:07.949347300+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 23 ms
2025-11-03 12:59:07.956 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] ERROR c.s.c.service.LegacySystemService - Fallback triggered for employee: y0z1a2b3, error: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:07.956 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Legacy DLQ - Employee: y0z1a2b3, Error: Resilience fallback: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:13.826 [http-nio-8084-exec-5] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: k2l3m4n5
2025-11-03 12:59:13.837 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 12:59:13.838 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - hours worked = 0.15
2025-11-03 12:59:13.839 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - check-out event = c2f60e3e-c6ff-4fd2-9ae6-b73cdf07a741
2025-11-03 12:59:13.857 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: k2l3m4n5
2025-11-03 12:59:13.858 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:59:13.857 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: k2l3m4n5
2025-11-03 12:59:13.859 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:13.859 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 12:59:13.863 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: k2l3m4n5
2025-11-03 12:59:13.863 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:13.864 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: k2l3m4n5
2025-11-03 12:59:13.865 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:13.866 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 12:59:13.867 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:13.868 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=k2l3m4n5}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:13.868 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:13.869 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.15 hours today, to=k2l3m4n5@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:13.886 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee k2l3m4n5
2025-11-03 12:59:13.887 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee k2l3m4n5
2025-11-03 12:59:13.889 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to k2l3m4n5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 12:59:13.895 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:13.896 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:13.906 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:13.912 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:13.912732200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 42 ms
2025-11-03 12:59:14.896 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 12:59:14.898 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:14.947 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: k2l3m4n5
2025-11-03 12:59:14.947 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 12:59:14.949 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T12:59:14.948073800+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1084 ms
2025-11-03 12:59:15.915 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:15.915 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: k2l3m4n5
2025-11-03 12:59:15.916 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:15.917 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:15.918 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=k2l3m4n5}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:15.924 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee k2l3m4n5
2025-11-03 12:59:15.924 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee k2l3m4n5
2025-11-03 12:59:15.930 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:15.931 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:15.932 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:15.933 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:15.933036600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 16 ms
2025-11-03 12:59:17.940 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 12:59:17.941 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: k2l3m4n5
2025-11-03 12:59:17.943 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 12:59:17.943 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 12:59:17.944 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.15, employeeId=k2l3m4n5}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 12:59:17.957 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.15 hours for employee k2l3m4n5
2025-11-03 12:59:17.958 [http-nio-8084-exec-2] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee k2l3m4n5
2025-11-03 12:59:17.964 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:17.965 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 12:59:17.967 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 12:59:17.967 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T12:59:17.967481500+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 24 ms
2025-11-03 12:59:17.968 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] ERROR c.s.c.service.LegacySystemService - Fallback triggered for employee: k2l3m4n5, error: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 12:59:17.968 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Legacy DLQ - Employee: k2l3m4n5, Error: Resilience fallback: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:08:06.315 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-2, groupId=email-service] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:08:06.315 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:08:06.320 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions revoked: [check-out-completed-0]
2025-11-03 13:08:06.320 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions revoked: [check-out-completed-0]
2025-11-03 13:08:06.321 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Member consumer-legacy-system-1-64ecaab3-b6cd-4333-933f-0abc0d6798a2 sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:08:06.321 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Member consumer-email-service-2-bc37a4f6-e62b-4248-bb75-704b44ef3fe3 sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-2, groupId=email-service] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:08:06.325 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:08:06.333 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.334 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.334 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.334 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:08:06.712 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:08:06.713 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:08:06.737 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-legacy-system-1 unregistered
2025-11-03 13:08:06.738 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-email-service-2 unregistered
2025-11-03 13:08:06.742 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: Consumer stopped
2025-11-03 13:08:06.742 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: Consumer stopped
2025-11-03 13:08:06.752 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 13:08:06.835 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 13:08:06.850 [SpringApplicationShutdownHook] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2025-11-03 13:08:06.860 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:08:06.860 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:08:06.860 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:08:06.860 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:08:06.862 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for clock-producer-1 unregistered
2025-11-03 13:08:06.931 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:08:06.959 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 13:08:06.964 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 13:08:15.175 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:08:15.243 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 52200 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:08:15.245 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:08:15.246 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:08:16.467 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.468 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.469 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.488 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.489 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.489 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.534 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.535 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.536 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.556 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.557 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.557 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.571 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.571 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.571 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.589 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.590 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.591 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.614 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:08:16.615 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:08:16.615 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:08:16.895 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:08:16.970 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 1 JPA repository interface.
2025-11-03 13:08:18.362 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:08:18.380 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:08:18.384 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:08:18.384 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:08:18.467 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:08:18.468 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3157 ms
2025-11-03 13:08:19.057 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-03 13:08:19.140 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-03 13:08:19.189 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-03 13:08:19.544 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 13:08:19.584 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 13:08:19.831 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1aee6983
2025-11-03 13:08:19.833 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 13:08:19.882 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 13:08:19.910 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-03 13:08:21.231 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-03 13:08:21.364 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:08:21.811 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 13:08:23.424 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-03 13:08:24.606 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 7 endpoints beneath base path '/actuator'
2025-11-03 13:08:24.746 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8084"]
2025-11-03 13:08:24.760 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8084 (http) with context path '/'
2025-11-03 13:08:24.822 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-legacy-system-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = legacy-system
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:08:24.896 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:08:25.065 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:08:25.066 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:08:25.066 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762171705063
2025-11-03 13:08:25.086 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Subscribed to topic(s): check-out-completed
2025-11-03 13:08:25.104 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-email-service-2
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = email-service
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:08:25.105 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:08:25.116 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:08:25.116 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:08:25.116 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762171705116
2025-11-03 13:08:25.124 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-2, groupId=email-service] Subscribed to topic(s): check-out-completed
2025-11-03 13:08:25.152 [main] INFO  com.siemens.clock.ClockApplication - Started ClockApplication in 10.852 seconds (process running for 11.609)
2025-11-03 13:08:25.835 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-email-service-2, groupId=email-service] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:08:25.835 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:08:25.836 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:08:25.836 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:08:25.845 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] (Re-)joining group
2025-11-03 13:08:25.845 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] (Re-)joining group
2025-11-03 13:08:25.882 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: need to re-join with the given member-id: consumer-legacy-system-1-9f1644b1-2814-4923-b169-ab4d82c9e70a
2025-11-03 13:08:25.882 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: need to re-join with the given member-id: consumer-email-service-2-113b6180-4cf5-41ef-a586-dccf0f0cf8e8
2025-11-03 13:08:25.883 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] (Re-)joining group
2025-11-03 13:08:25.883 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] (Re-)joining group
2025-11-03 13:08:25.895 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Successfully joined group with generation Generation{generationId=33, memberId='consumer-email-service-2-113b6180-4cf5-41ef-a586-dccf0f0cf8e8', protocol='range'}
2025-11-03 13:08:25.898 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Successfully joined group with generation Generation{generationId=33, memberId='consumer-legacy-system-1-9f1644b1-2814-4923-b169-ab4d82c9e70a', protocol='range'}
2025-11-03 13:08:25.911 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Finished assignment for group at generation 33: {consumer-email-service-2-113b6180-4cf5-41ef-a586-dccf0f0cf8e8=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:08:25.911 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Finished assignment for group at generation 33: {consumer-legacy-system-1-9f1644b1-2814-4923-b169-ab4d82c9e70a=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:08:25.929 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Successfully synced group in generation Generation{generationId=33, memberId='consumer-email-service-2-113b6180-4cf5-41ef-a586-dccf0f0cf8e8', protocol='range'}
2025-11-03 13:08:25.930 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:08:25.931 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Successfully synced group in generation Generation{generationId=33, memberId='consumer-legacy-system-1-9f1644b1-2814-4923-b169-ab4d82c9e70a', protocol='range'}
2025-11-03 13:08:25.932 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:08:25.938 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:08:25.938 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-2, groupId=email-service] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:08:25.955 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=32, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:08:25.955 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=32, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:08:25.958 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions assigned: [check-out-completed-0]
2025-11-03 13:08:25.958 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions assigned: [check-out-completed-0]
2025-11-03 13:12:36.826 [http-nio-8084-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 13:12:36.826 [http-nio-8084-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 13:12:36.834 [http-nio-8084-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-11-03 13:12:37.586 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: q6r5s1t3
2025-11-03 13:12:46.353 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: m7n8o2p4
2025-11-03 13:12:52.309 [http-nio-8084-exec-4] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: i9j1k3l5
2025-11-03 13:12:58.537 [http-nio-8084-exec-5] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: e2f4g6h8
2025-11-03 13:13:04.700 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: a1b3c5d7
2025-11-03 13:13:38.414 [http-nio-8084-exec-7] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: q6r5s1t3
2025-11-03 13:13:38.430 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:13:38.430 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:13:38.436 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - check-out event = ee236bd6-b9a8-4dfd-ab09-5afa2f51895b
2025-11-03 13:13:38.462 [http-nio-8084-exec-7] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 13:13:38.465 [http-nio-8084-exec-7] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:13:38.500 [http-nio-8084-exec-7] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 13:13:38.566 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:13:38.567 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:13:38.567 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172018566
2025-11-03 13:13:38.608 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:13:38.613 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 15 with epoch 0
2025-11-03 13:13:38.846 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: q6r5s1t3
2025-11-03 13:13:38.846 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: q6r5s1t3
2025-11-03 13:13:38.864 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:13:38.864 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:13:38.876 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:13:38.876 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:13:38.879 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:13:38.879 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: q6r5s1t3
2025-11-03 13:13:38.941 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:13:38.941 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:13:38.958 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:13:38.958 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:13:38.969 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=q6r5s1t3@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:13:38.969 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=q6r5s1t3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:13:39.160 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to q6r5s1t3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:13:39.160 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee q6r5s1t3
2025-11-03 13:13:39.161 [http-nio-8084-exec-8] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee q6r5s1t3
2025-11-03 13:13:39.198 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:13:39.201 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:13:39.206 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:13:39.215 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:13:39.213863800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 327 ms
2025-11-03 13:13:40.626 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:13:40.631 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:13:40.686 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: q6r5s1t3
2025-11-03 13:13:40.687 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:13:40.688 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:13:40.687117900+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1808 ms
2025-11-03 13:13:41.236 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:13:41.237 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:13:41.237 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:13:41.238 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:13:41.239 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=q6r5s1t3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:13:41.259 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee q6r5s1t3
2025-11-03 13:13:41.259 [http-nio-8084-exec-10] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee q6r5s1t3
2025-11-03 13:13:41.263 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:13:41.266 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:13:41.267 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:13:41.269 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:13:41.268623300+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 31 ms
2025-11-03 13:13:43.275 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:13:43.276 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:13:43.276 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:13:43.277 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:13:43.278 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=q6r5s1t3}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:13:43.289 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee q6r5s1t3
2025-11-03 13:13:45.422 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:13:45.424 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:13:45.447 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: q6r5s1t3
2025-11-03 13:13:45.447 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:13:45.447 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:13:45.447578700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2171 ms
2025-11-03 13:14:10.260 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: m7n8o2p4
2025-11-03 13:14:10.276 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:14:10.276 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:14:10.278 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - check-out event = 3b03ec71-f51b-4a0c-af25-1736b24be8ff
2025-11-03 13:14:10.291 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: m7n8o2p4
2025-11-03 13:14:10.296 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: m7n8o2p4
2025-11-03 13:14:10.296 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:10.297 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:10.297 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:10.298 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:10.298 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: m7n8o2p4
2025-11-03 13:14:10.298 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:14:10.299 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:14:10.299 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:14:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=m7n8o2p4@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=m7n8o2p4}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:10.313 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to m7n8o2p4@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:14:10.314 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:14:10.315 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee m7n8o2p4
2025-11-03 13:14:10.319 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:10.320 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:10.323 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:14:10.324 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:14:10.324375300+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 24 ms
2025-11-03 13:14:11.644 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:11.644 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:11.684 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: m7n8o2p4
2025-11-03 13:14:11.684 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:14:11.684 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:14:11.684666400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1386 ms
2025-11-03 13:14:12.340 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:12.341 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:14:12.341 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:14:12.343 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:12.344 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=m7n8o2p4}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:12.356 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:14:15.491 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:15.492 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:15.513 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: m7n8o2p4
2025-11-03 13:14:15.514 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:14:15.515 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:14:15.515590700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3173 ms
2025-11-03 13:14:23.852 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: i9j1k3l5
2025-11-03 13:14:23.860 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:14:23.860 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:14:23.861 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - check-out event = 8518eeb8-f86b-4bc4-a3b7-49412219d52d
2025-11-03 13:14:23.871 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: i9j1k3l5
2025-11-03 13:14:23.872 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:23.873 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:23.873 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:14:23.874 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:14:23.874 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: i9j1k3l5
2025-11-03 13:14:23.874 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:23.875 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:23.875 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:23.875 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:14:23.875 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=i9j1k3l5@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:23.876 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:14:23.877 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:23.877 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=i9j1k3l5}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:23.882 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:14:23.883 [http-nio-8084-exec-7] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for i9j1k3l5@company.com
2025-11-03 13:14:23.884 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:14:23.885 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:23.886 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:23.888 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:14:23.889 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:14:23.889525200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 14 ms
2025-11-03 13:14:25.902 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:25.903 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:14:25.904 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:14:25.907 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:25.911 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=i9j1k3l5@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:25.925 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:14:26.079 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:26.080 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:26.099 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: i9j1k3l5
2025-11-03 13:14:26.099 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:14:26.100 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:14:26.100313400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2224 ms
2025-11-03 13:14:26.975 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:26.976 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:26.994 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: i9j1k3l5
2025-11-03 13:14:26.995 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:14:26.996 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:14:26.996037300+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1091 ms
2025-11-03 13:14:36.536 [http-nio-8084-exec-10] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: e2f4g6h8
2025-11-03 13:14:36.557 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:14:36.559 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:14:36.561 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - check-out event = af082755-62cb-48ea-b787-65ab54d9733d
2025-11-03 13:14:36.577 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: e2f4g6h8
2025-11-03 13:14:36.588 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:36.587 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: e2f4g6h8
2025-11-03 13:14:36.594 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:36.594 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:36.595 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:14:36.595 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:36.596 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:14:36.598 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:14:36.598 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:14:36.599 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:36.601 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:36.602 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=e2f4g6h8@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:36.602 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=e2f4g6h8}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:36.615 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee e2f4g6h8
2025-11-03 13:14:36.615 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:14:36.615 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:14:36.616 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for e2f4g6h8@company.com
2025-11-03 13:14:36.619 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:36.621 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:36.622 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:36.624 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:36.625 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:14:36.626 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:14:36.626063800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 28 ms
2025-11-03 13:14:36.626 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:14:36.627 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:14:36.627076700+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 30 ms
2025-11-03 13:14:38.628 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:14:38.629 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:14:38.629 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:14:38.630 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:38.631 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=e2f4g6h8}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:38.639 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee e2f4g6h8
2025-11-03 13:14:38.642 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:14:38.643 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:14:38.644 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:14:38.647 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:14:38.647 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=e2f4g6h8@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:14:38.656 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:14:38.656 [http-nio-8084-exec-2] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for e2f4g6h8@company.com
2025-11-03 13:14:38.663 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:38.663 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:38.666 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:14:38.667 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:14:38.667988+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 22 ms
2025-11-03 13:14:38.672 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: e2f4g6h8, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:38.673 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: e2f4g6h8, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:14:43.608 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:14:43.609 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:14:43.621 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: e2f4g6h8
2025-11-03 13:14:43.621 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:14:43.622 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:14:43.622110200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4991 ms
2025-11-03 13:17:42.132 [http-nio-8084-exec-8] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: a1b3c5d7
2025-11-03 13:17:42.142 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:17:42.144 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - hours worked = 0.06666666666666667
2025-11-03 13:17:42.146 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - check-out event = c648b439-08c1-4ce3-ba50-3d603c1e85ab
2025-11-03 13:17:42.165 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: a1b3c5d7
2025-11-03 13:17:42.165 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: a1b3c5d7
2025-11-03 13:17:42.166 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:17:42.166 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:17:42.168 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:17:42.169 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:17:42.168 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:17:42.171 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:17:42.172 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:17:42.172 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:17:42.173 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:17:42.174 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:17:42.175 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.06666666666666667, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:17:42.175 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=a1b3c5d7@company.com, body=You worked 0.07 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:17:42.194 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee a1b3c5d7
2025-11-03 13:17:42.194 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:17:42.196 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:17:42.196 [http-nio-8084-exec-10] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for a1b3c5d7@company.com
2025-11-03 13:17:42.202 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:42.202 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:42.203 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:17:42.204 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:17:42.209 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:17:42.210 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:17:42.211 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:17:42.211223400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 39 ms
2025-11-03 13:17:42.211 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:17:42.211223400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 38 ms
2025-11-03 13:17:44.220 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:17:44.220 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:17:44.221 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:17:44.221 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:17:44.221 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:17:44.222 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:17:44.222 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:17:44.223 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=a1b3c5d7@company.com, body=You worked 0.07 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:17:44.224 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:17:44.225 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.06666666666666667, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:17:44.234 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee a1b3c5d7
2025-11-03 13:17:44.234 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:17:44.234 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:17:44.234 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for a1b3c5d7@company.com
2025-11-03 13:17:44.237 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:44.238 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:17:44.239 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:44.241 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:17:44.241 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:17:44.242 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:17:44.242530100+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 20 ms
2025-11-03 13:17:44.243 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: a1b3c5d7, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:44.243 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: a1b3c5d7, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:17:44.242 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:17:44.244 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:17:44.244541700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 21 ms
2025-11-03 13:17:46.250 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:17:46.251 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:17:46.255 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:17:46.258 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:17:46.259 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.06666666666666667, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:17:46.276 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee a1b3c5d7
2025-11-03 13:17:50.891 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:17:50.892 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:17:50.913 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: a1b3c5d7
2025-11-03 13:17:50.913 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:17:50.913 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:17:50.913766100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4662 ms
2025-11-03 13:20:37.659 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-2, groupId=email-service] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:20:37.659 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:20:37.659 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions revoked: [check-out-completed-0]
2025-11-03 13:20:37.660 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions revoked: [check-out-completed-0]
2025-11-03 13:20:37.660 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Member consumer-email-service-2-113b6180-4cf5-41ef-a586-dccf0f0cf8e8 sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:20:37.660 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Member consumer-legacy-system-1-9f1644b1-2814-4923-b169-ab4d82c9e70a sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:20:37.660 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.660 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.661 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-2, groupId=email-service] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:20:37.661 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:20:37.665 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.665 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.665 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.665 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:20:37.939 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:20:37.939 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:20:37.939 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:20:37.939 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:20:37.939 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:20:37.940 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:20:37.940 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:20:37.940 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:20:37.969 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-legacy-system-1 unregistered
2025-11-03 13:20:37.971 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-email-service-2 unregistered
2025-11-03 13:20:37.973 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: Consumer stopped
2025-11-03 13:20:37.973 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: Consumer stopped
2025-11-03 13:20:37.978 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 13:20:38.088 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 13:20:38.091 [SpringApplicationShutdownHook] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2025-11-03 13:20:38.094 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:20:38.094 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:20:38.094 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:20:38.094 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:20:38.095 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for clock-producer-1 unregistered
2025-11-03 13:20:38.103 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:20:38.106 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 13:20:38.109 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 13:20:43.076 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:20:43.161 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 27800 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:20:43.162 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:20:43.163 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:20:44.280 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.282 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.283 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.296 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.297 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.297 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.333 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.333 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.333 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.349 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.349 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.350 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.363 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.363 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.364 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.382 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.383 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.383 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.399 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:20:44.400 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:20:44.400 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:20:44.665 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:20:44.746 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 1 JPA repository interface.
2025-11-03 13:20:46.049 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:20:46.065 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:20:46.067 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:20:46.068 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:20:46.160 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:20:46.160 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2914 ms
2025-11-03 13:20:46.794 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-03 13:20:46.881 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-03 13:20:46.938 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-03 13:20:47.295 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 13:20:47.339 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 13:20:47.624 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@69e8b711
2025-11-03 13:20:47.625 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 13:20:47.670 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 13:20:47.702 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-03 13:20:48.679 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-03 13:20:48.739 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:20:49.207 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 13:20:50.753 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-03 13:20:51.879 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 7 endpoints beneath base path '/actuator'
2025-11-03 13:20:51.997 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8084"]
2025-11-03 13:20:52.014 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8084 (http) with context path '/'
2025-11-03 13:20:52.071 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-email-service-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = email-service
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:20:52.179 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:20:52.329 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:20:52.329 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:20:52.329 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172452327
2025-11-03 13:20:52.344 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-1, groupId=email-service] Subscribed to topic(s): check-out-completed
2025-11-03 13:20:52.355 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-legacy-system-2
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = legacy-system
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:20:52.356 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:20:52.365 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:20:52.365 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:20:52.365 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172452365
2025-11-03 13:20:52.372 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Subscribed to topic(s): check-out-completed
2025-11-03 13:20:52.399 [main] INFO  com.siemens.clock.ClockApplication - Started ClockApplication in 10.079 seconds (process running for 10.6)
2025-11-03 13:20:53.054 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:20:53.055 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-email-service-1, groupId=email-service] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:20:53.055 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:20:53.055 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:20:53.060 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:20:53.061 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:20:53.082 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: need to re-join with the given member-id: consumer-legacy-system-2-dfde266c-aa31-4f4a-aafa-390f506b6c3c
2025-11-03 13:20:53.082 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: need to re-join with the given member-id: consumer-email-service-1-d8fb5a4c-28bb-42a3-a7b9-f05fc7460ace
2025-11-03 13:20:53.082 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:20:53.082 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:20:53.085 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully joined group with generation Generation{generationId=35, memberId='consumer-email-service-1-d8fb5a4c-28bb-42a3-a7b9-f05fc7460ace', protocol='range'}
2025-11-03 13:20:53.085 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully joined group with generation Generation{generationId=35, memberId='consumer-legacy-system-2-dfde266c-aa31-4f4a-aafa-390f506b6c3c', protocol='range'}
2025-11-03 13:20:53.097 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Finished assignment for group at generation 35: {consumer-legacy-system-2-dfde266c-aa31-4f4a-aafa-390f506b6c3c=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:20:53.097 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Finished assignment for group at generation 35: {consumer-email-service-1-d8fb5a4c-28bb-42a3-a7b9-f05fc7460ace=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:20:53.103 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully synced group in generation Generation{generationId=35, memberId='consumer-legacy-system-2-dfde266c-aa31-4f4a-aafa-390f506b6c3c', protocol='range'}
2025-11-03 13:20:53.103 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully synced group in generation Generation{generationId=35, memberId='consumer-email-service-1-d8fb5a4c-28bb-42a3-a7b9-f05fc7460ace', protocol='range'}
2025-11-03 13:20:53.104 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:20:53.104 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:20:53.108 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-1, groupId=email-service] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:20:53.108 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:20:53.116 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=37, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:20:53.116 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=37, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:20:53.118 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions assigned: [check-out-completed-0]
2025-11-03 13:20:53.118 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions assigned: [check-out-completed-0]
2025-11-03 13:21:17.290 [http-nio-8084-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 13:21:17.291 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 13:21:17.297 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-03 13:21:18.132 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: e2f4g6h8
2025-11-03 13:21:25.174 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: a1b3c5d7
2025-11-03 13:21:31.494 [http-nio-8084-exec-4] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: i9j1k3l5
2025-11-03 13:21:37.967 [http-nio-8084-exec-5] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: m7n8o2p4
2025-11-03 13:21:43.583 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: q6r5s1t3
2025-11-03 13:22:13.831 [http-nio-8084-exec-7] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: q6r5s1t3
2025-11-03 13:22:13.850 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:22:13.851 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - hours worked = 0.0
2025-11-03 13:22:13.860 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - check-out event = 29559379-3092-4578-9cbd-21cbd9bb6a33
2025-11-03 13:22:13.888 [http-nio-8084-exec-7] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 13:22:13.890 [http-nio-8084-exec-7] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:22:13.933 [http-nio-8084-exec-7] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 13:22:14.059 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:22:14.059 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:22:14.062 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172534059
2025-11-03 13:22:14.099 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:22:14.111 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 16 with epoch 0
2025-11-03 13:22:14.308 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: q6r5s1t3
2025-11-03 13:22:14.308 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: q6r5s1t3
2025-11-03 13:22:14.321 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:14.324 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:14.346 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:14.347 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:14.350 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:22:14.353 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: q6r5s1t3
2025-11-03 13:22:14.421 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:14.421 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:14.439 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:14.439 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:14.456 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=q6r5s1t3@company.com, body=You worked 0.00 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:14.456 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=q6r5s1t3, hoursWorked=0.0}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:14.684 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to q6r5s1t3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:14.686 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee q6r5s1t3
2025-11-03 13:22:16.185 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:16.188 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:16.245 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: q6r5s1t3
2025-11-03 13:22:16.246 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:22:16.249 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:16.247398600+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1893 ms
2025-11-03 13:22:17.273 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:17.274 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:17.302 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: q6r5s1t3
2025-11-03 13:22:17.304 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:22:17.305 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:17.305874800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2953 ms
2025-11-03 13:22:24.697 [http-nio-8084-exec-10] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: a1b3c5d7
2025-11-03 13:22:24.708 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:22:24.709 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - hours worked = 0.0
2025-11-03 13:22:24.710 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - check-out event = 4b3223d0-f640-40b7-90ec-63c773de61f2
2025-11-03 13:22:24.724 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: a1b3c5d7
2025-11-03 13:22:24.725 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:24.728 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:24.731 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: a1b3c5d7
2025-11-03 13:22:24.729 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:22:24.732 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:24.735 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:24.737 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:22:24.736 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:24.738 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:24.739 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:24.739 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:24.740 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=a1b3c5d7, hoursWorked=0.0}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:24.740 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=a1b3c5d7@company.com, body=You worked 0.00 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:24.757 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee a1b3c5d7
2025-11-03 13:22:24.772 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:25.587 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:25.589 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:25.612 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: a1b3c5d7
2025-11-03 13:22:25.613 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:22:25.614 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:25.613921500+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 884 ms
2025-11-03 13:22:28.084 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:28.085 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:28.101 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: a1b3c5d7
2025-11-03 13:22:28.102 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:22:28.103 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:28.102391600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3365 ms
2025-11-03 13:22:31.474 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: e2f4g6h8
2025-11-03 13:22:31.489 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:22:31.490 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:22:31.492 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - check-out event = 9f46fd5c-1239-4f27-9ec1-a5801ae5d704
2025-11-03 13:22:31.513 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: e2f4g6h8
2025-11-03 13:22:31.519 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:31.522 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: e2f4g6h8
2025-11-03 13:22:31.523 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:31.523 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:31.524 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:31.525 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:22:31.526 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:31.528 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:22:31.532 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:31.533 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:31.534 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:31.536 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:31.539 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=e2f4g6h8@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:31.564 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee e2f4g6h8
2025-11-03 13:22:31.568 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:32.876 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:32.876 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:32.892 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: e2f4g6h8
2025-11-03 13:22:32.892 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:22:32.892 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:32.892355500+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1363 ms
2025-11-03 13:22:35.153 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:35.154 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:35.176 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: e2f4g6h8
2025-11-03 13:22:35.178 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:22:35.178 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:35.178209+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3652 ms
2025-11-03 13:22:38.124 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: i9j1k3l5
2025-11-03 13:22:38.144 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:22:38.146 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:22:38.148 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - check-out event = 38b291ac-0cc7-4a43-a3db-2463d4f96096
2025-11-03 13:22:38.178 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: i9j1k3l5
2025-11-03 13:22:38.180 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: i9j1k3l5
2025-11-03 13:22:38.180 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:38.180 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:38.180 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:38.180 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:22:38.186 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:38.186 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:38.187 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:22:38.188 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:38.188 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=i9j1k3l5@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:38.188 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:38.194 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:38.195 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:38.200 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:38.202 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:22:38.202 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee i9j1k3l5
2025-11-03 13:22:38.205 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:38.206 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:38.210 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:22:38.215 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:22:38.215842900+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 22 ms
2025-11-03 13:22:40.158 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:40.159 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:40.173 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: i9j1k3l5
2025-11-03 13:22:40.173 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:22:40.175 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:40.173609300+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1993 ms
2025-11-03 13:22:40.233 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:40.233 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:22:40.234 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:40.236 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:40.236 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:40.242 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:22:40.243 [http-nio-8084-exec-8] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee i9j1k3l5
2025-11-03 13:22:40.246 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:40.247 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:40.248 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:22:40.251 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:22:40.250124700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 14 ms
2025-11-03 13:22:42.252 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:42.253 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:22:42.254 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:42.255 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:42.256 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:42.270 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:22:44.432 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:44.432 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:44.446 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: i9j1k3l5
2025-11-03 13:22:44.446 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:22:44.446 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:44.446734700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2193 ms
2025-11-03 13:22:45.403 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: m7n8o2p4
2025-11-03 13:22:45.410 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:22:45.410 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:22:45.411 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - check-out event = 72bd3357-aa1e-400e-9736-da4520a6284e
2025-11-03 13:22:45.420 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: m7n8o2p4
2025-11-03 13:22:45.422 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: m7n8o2p4
2025-11-03 13:22:45.423 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:45.421 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:45.425 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:45.426 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:22:45.427 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:45.427 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:45.428 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: m7n8o2p4
2025-11-03 13:22:45.428 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:45.429 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:45.429 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=m7n8o2p4, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:45.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:45.435 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=m7n8o2p4@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:45.469 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:22:45.470 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee m7n8o2p4
2025-11-03 13:22:45.477 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:45.478 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:45.481 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to m7n8o2p4@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:45.482 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for m7n8o2p4@company.com
2025-11-03 13:22:45.483 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:22:45.485 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:22:45.484923+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 56 ms
2025-11-03 13:22:45.489 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:45.490 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:45.502 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:22:45.504 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:22:45.503929200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 74 ms
2025-11-03 13:22:47.491 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:22:47.492 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:22:47.492 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:22:47.494 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:47.495 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=m7n8o2p4, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:47.508 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:22:47.509 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: m7n8o2p4
2025-11-03 13:22:47.511 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:22:47.515 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:22:47.516 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{subject=Daily Work Summary - 2025-11-03, to=m7n8o2p4@company.com, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:22:47.517 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:22:47.530 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to m7n8o2p4@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:22:47.531 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for m7n8o2p4@company.com
2025-11-03 13:22:47.536 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:47.537 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:47.543 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:22:47.544 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:22:47.544470500+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 33 ms
2025-11-03 13:22:47.554 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: m7n8o2p4, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:47.556 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: m7n8o2p4, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:22:51.745 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:22:51.745 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:22:51.758 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: m7n8o2p4
2025-11-03 13:22:51.758 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:22:51.758 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:22:51.758244300+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4266 ms
2025-11-03 13:26:30.577 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:26:30.577 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-1, groupId=email-service] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:26:30.579 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions revoked: [check-out-completed-0]
2025-11-03 13:26:30.579 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions revoked: [check-out-completed-0]
2025-11-03 13:26:30.579 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Member consumer-legacy-system-2-dfde266c-aa31-4f4a-aafa-390f506b6c3c sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:26:30.579 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Member consumer-email-service-1-d8fb5a4c-28bb-42a3-a7b9-f05fc7460ace sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-1, groupId=email-service] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:26:30.580 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:26:30.584 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.584 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.584 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.584 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:26:30.865 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:26:30.865 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:26:30.865 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:26:30.865 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:26:30.875 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-email-service-1 unregistered
2025-11-03 13:26:30.878 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: Consumer stopped
2025-11-03 13:26:30.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:26:30.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:26:30.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:26:30.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:26:30.996 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-legacy-system-2 unregistered
2025-11-03 13:26:30.999 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: Consumer stopped
2025-11-03 13:26:31.002 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 13:26:31.087 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 13:26:31.090 [SpringApplicationShutdownHook] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2025-11-03 13:26:31.112 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:26:31.112 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:26:31.112 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:26:31.112 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:26:31.115 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for clock-producer-1 unregistered
2025-11-03 13:26:31.135 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:26:31.143 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 13:26:31.153 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 13:26:37.700 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:26:37.768 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 50868 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:26:37.769 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:26:37.770 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:26:38.727 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.728 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.730 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.747 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.747 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.747 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.782 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.782 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.782 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.803 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.804 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.805 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.819 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.819 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.819 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.834 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.835 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.835 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:38.849 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:26:38.850 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:26:38.850 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:26:39.134 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:26:39.203 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 1 JPA repository interface.
2025-11-03 13:26:40.490 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:26:40.505 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:26:40.507 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:26:40.507 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:26:40.578 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:26:40.579 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2741 ms
2025-11-03 13:26:41.207 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-03 13:26:41.267 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-03 13:26:41.312 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-03 13:26:41.705 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 13:26:41.740 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 13:26:42.008 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@764a3867
2025-11-03 13:26:42.010 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 13:26:42.057 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 13:26:42.097 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-03 13:26:43.058 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-03 13:26:43.133 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:26:43.552 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 13:26:45.129 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-03 13:26:46.328 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 7 endpoints beneath base path '/actuator'
2025-11-03 13:26:46.500 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8084"]
2025-11-03 13:26:46.519 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8084 (http) with context path '/'
2025-11-03 13:26:46.579 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-email-service-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = email-service
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:26:46.642 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:26:46.801 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:26:46.802 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:26:46.802 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172806800
2025-11-03 13:26:46.825 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-1, groupId=email-service] Subscribed to topic(s): check-out-completed
2025-11-03 13:26:46.839 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-legacy-system-2
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = legacy-system
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:26:46.840 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:26:46.855 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:26:46.856 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:26:46.856 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172806855
2025-11-03 13:26:46.875 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Subscribed to topic(s): check-out-completed
2025-11-03 13:26:46.901 [main] INFO  com.siemens.clock.ClockApplication - Started ClockApplication in 9.912 seconds (process running for 10.373)
2025-11-03 13:26:47.432 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-email-service-1, groupId=email-service] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:26:47.432 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:26:47.433 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:26:47.433 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:26:47.441 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:26:47.442 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:26:47.466 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: need to re-join with the given member-id: consumer-email-service-1-22f6366c-3764-4f64-94e2-216613452336
2025-11-03 13:26:47.466 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:26:47.466 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: need to re-join with the given member-id: consumer-legacy-system-2-a2cc744e-337b-475d-960b-7f5d0c6bfa60
2025-11-03 13:26:47.467 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:26:47.470 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully joined group with generation Generation{generationId=37, memberId='consumer-email-service-1-22f6366c-3764-4f64-94e2-216613452336', protocol='range'}
2025-11-03 13:26:47.471 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully joined group with generation Generation{generationId=37, memberId='consumer-legacy-system-2-a2cc744e-337b-475d-960b-7f5d0c6bfa60', protocol='range'}
2025-11-03 13:26:47.485 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Finished assignment for group at generation 37: {consumer-legacy-system-2-a2cc744e-337b-475d-960b-7f5d0c6bfa60=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:26:47.485 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Finished assignment for group at generation 37: {consumer-email-service-1-22f6366c-3764-4f64-94e2-216613452336=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:26:47.493 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully synced group in generation Generation{generationId=37, memberId='consumer-legacy-system-2-a2cc744e-337b-475d-960b-7f5d0c6bfa60', protocol='range'}
2025-11-03 13:26:47.494 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:26:47.494 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully synced group in generation Generation{generationId=37, memberId='consumer-email-service-1-22f6366c-3764-4f64-94e2-216613452336', protocol='range'}
2025-11-03 13:26:47.494 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:26:47.497 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-1, groupId=email-service] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:26:47.497 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:26:47.508 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=42, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:26:47.508 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=42, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:26:47.511 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions assigned: [check-out-completed-0]
2025-11-03 13:26:47.513 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions assigned: [check-out-completed-0]
2025-11-03 13:27:14.045 [http-nio-8084-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 13:27:14.045 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 13:27:14.050 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 13:27:14.686 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: i9j1k3l5
2025-11-03 13:27:21.968 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: e2f4g6h8
2025-11-03 13:27:28.365 [http-nio-8084-exec-4] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: a1b3c5d7
2025-11-03 13:27:34.868 [http-nio-8084-exec-9] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: u4v7w8x9
2025-11-03 13:27:40.674 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: y0z1a2b3
2025-11-03 13:27:57.260 [http-nio-8084-exec-7] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: u4v7w8x9
2025-11-03 13:27:57.290 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:27:57.293 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - hours worked = 0.0
2025-11-03 13:27:57.304 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - check-out event = 9d969038-a9b7-4b22-807b-383a1e663610
2025-11-03 13:27:57.333 [http-nio-8084-exec-7] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 13:27:57.336 [http-nio-8084-exec-7] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:27:57.364 [http-nio-8084-exec-7] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 13:27:57.410 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:27:57.411 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:27:57.411 [http-nio-8084-exec-7] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762172877410
2025-11-03 13:27:57.445 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:27:57.447 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 17 with epoch 0
2025-11-03 13:27:57.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: u4v7w8x9
2025-11-03 13:27:57.661 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: u4v7w8x9
2025-11-03 13:27:57.676 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:27:57.676 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:27:57.691 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:27:57.693 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: u4v7w8x9
2025-11-03 13:27:57.695 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:27:57.696 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: u4v7w8x9
2025-11-03 13:27:57.751 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:27:57.752 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:27:57.789 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:27:57.789 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:27:57.818 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=u4v7w8x9@company.com, subject=Daily Work Summary - 2025-11-03, body=You worked 0.00 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:27:57.817 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.0, employeeId=u4v7w8x9}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:27:58.050 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to u4v7w8x9@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:27:58.050 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee u4v7w8x9
2025-11-03 13:27:59.077 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:27:59.089 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:27:59.123 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: u4v7w8x9
2025-11-03 13:27:59.124 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:27:59.125 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:27:59.124097500+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1427 ms
2025-11-03 13:28:00.835 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:28:00.838 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:00.863 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: u4v7w8x9
2025-11-03 13:28:00.864 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:28:00.864 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:28:00.864921600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3171 ms
2025-11-03 13:28:10.179 [http-nio-8084-exec-10] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: a1b3c5d7
2025-11-03 13:28:10.188 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:28:10.188 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - hours worked = 0.0
2025-11-03 13:28:10.189 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - check-out event = eb80a56a-8f6f-41b2-8df9-accc82caf6d5
2025-11-03 13:28:10.207 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: a1b3c5d7
2025-11-03 13:28:10.206 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: a1b3c5d7
2025-11-03 13:28:10.212 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:10.214 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:10.217 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:10.218 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:28:10.217 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:10.220 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:28:10.221 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:28:10.225 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:28:10.227 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:10.229 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.0, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:10.243 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:10.245 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=a1b3c5d7@company.com, subject=Daily Work Summary - 2025-11-03, body=You worked 0.00 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:10.264 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee a1b3c5d7
2025-11-03 13:28:10.265 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:28:10.294 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:10.303 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:10.317 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:28:10.320 [http-nio-8084-exec-2] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for a1b3c5d7@company.com
2025-11-03 13:28:10.346 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:10.347 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:10.350 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:10.369 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:10.375 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:10.375698700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 129 ms
2025-11-03 13:28:10.376 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:10.376707900+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 151 ms
2025-11-03 13:28:12.391 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:12.391 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:12.392 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:28:12.392 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:28:12.395 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:28:12.395 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:28:12.397 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:12.397 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:12.397 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.0, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:12.397 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=a1b3c5d7@company.com, subject=Daily Work Summary - 2025-11-03, body=You worked 0.00 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:12.410 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee a1b3c5d7
2025-11-03 13:28:12.412 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:28:12.414 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:28:12.415 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for a1b3c5d7@company.com
2025-11-03 13:28:12.418 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:12.419 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:12.420 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:12.426 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:12.424 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:12.428 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:12.428064200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 31 ms
2025-11-03 13:28:12.430 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:12.431 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:12.431085300+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 37 ms
2025-11-03 13:28:12.435 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: a1b3c5d7, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:12.435 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: a1b3c5d7, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:14.433 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:14.435 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:28:14.438 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:28:14.439 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:14.440 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.0, employeeId=a1b3c5d7}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:14.448 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee a1b3c5d7
2025-11-03 13:28:17.204 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:28:17.210 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:17.228 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: a1b3c5d7
2025-11-03 13:28:17.228 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:28:17.229 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:28:17.229199100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2793 ms
2025-11-03 13:28:26.611 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: i9j1k3l5
2025-11-03 13:28:26.622 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:28:26.623 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:28:26.624 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - check-out event = 4de2a51a-09d6-43f5-8402-d46c02f931be
2025-11-03 13:28:26.642 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: i9j1k3l5
2025-11-03 13:28:26.643 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: i9j1k3l5
2025-11-03 13:28:26.643 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:26.645 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:26.645 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:26.645 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:28:26.648 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:28:26.649 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:28:26.651 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:26.652 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:28:26.655 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{hoursWorked=0.016666666666666666, employeeId=i9j1k3l5}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:26.655 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:28:26.656 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:26.656 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=i9j1k3l5@company.com, subject=Daily Work Summary - 2025-11-03, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:26.676 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:28:26.677 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:28:26.679 [http-nio-8084-exec-5] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for i9j1k3l5@company.com
2025-11-03 13:28:26.684 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:26.686 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:26.688 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:26.689 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:26.689458200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 36 ms
2025-11-03 13:28:28.700 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:28:28.702 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:28:28.704 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:28:28.704 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:28:28.705 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=i9j1k3l5@company.com, subject=Daily Work Summary - 2025-11-03, body=You worked 0.02 hours today}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:28:28.714 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:28:28.714 [http-nio-8084-exec-8] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for i9j1k3l5@company.com
2025-11-03 13:28:28.717 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:28.718 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:28.720 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:28:28.721 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:28:28.721880100+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 18 ms
2025-11-03 13:28:28.721 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: i9j1k3l5, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:28.721 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: i9j1k3l5, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:28:28.924 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:28:28.924 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:28:28.950 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: i9j1k3l5
2025-11-03 13:28:28.951 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:28:28.951 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:28:28.951729100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2303 ms
2025-11-03 13:31:31.839 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:31:31.839 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-1, groupId=email-service] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:31:31.841 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions revoked: [check-out-completed-0]
2025-11-03 13:31:31.841 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions revoked: [check-out-completed-0]
2025-11-03 13:31:31.842 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Member consumer-email-service-1-22f6366c-3764-4f64-94e2-216613452336 sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:31:31.842 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Member consumer-legacy-system-2-a2cc744e-337b-475d-960b-7f5d0c6bfa60 sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:31:31.843 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.843 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.844 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.844 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.844 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-1, groupId=email-service] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:31:31.844 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:31:31.847 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.847 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.847 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:31:31.847 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:31:32.176 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:31:32.177 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:31:32.203 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-legacy-system-2 unregistered
2025-11-03 13:31:32.205 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-email-service-1 unregistered
2025-11-03 13:31:32.206 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: Consumer stopped
2025-11-03 13:31:32.208 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: Consumer stopped
2025-11-03 13:31:32.211 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 13:31:32.299 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 13:31:32.303 [SpringApplicationShutdownHook] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2025-11-03 13:31:32.321 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:31:32.321 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:31:32.321 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:31:32.321 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:31:32.322 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for clock-producer-1 unregistered
2025-11-03 13:31:32.329 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:31:32.333 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 13:31:32.335 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 13:31:36.916 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:31:36.982 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 34428 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:31:36.983 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:31:36.984 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:31:38.081 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.083 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.085 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.099 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.099 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.100 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.139 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.140 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.140 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.158 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.159 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.159 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.171 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.172 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.173 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.191 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.192 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.192 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.207 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:31:38.208 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:31:38.209 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:31:38.504 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:31:38.575 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 1 JPA repository interface.
2025-11-03 13:31:39.924 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:31:39.939 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:31:39.941 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:31:39.942 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:31:40.018 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:31:40.019 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2967 ms
2025-11-03 13:31:40.606 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-03 13:31:40.669 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-03 13:31:40.733 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-03 13:31:41.094 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 13:31:41.127 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 13:31:41.353 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@33bd9ac3
2025-11-03 13:31:41.354 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 13:31:41.388 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 13:31:41.419 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-03 13:31:42.612 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-03 13:31:42.707 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:31:43.199 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 13:31:45.374 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-03 13:31:51.116 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 7 endpoints beneath base path '/actuator'
2025-11-03 13:31:51.434 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8084"]
2025-11-03 13:31:51.461 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8084 (http) with context path '/'
2025-11-03 13:31:51.547 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-legacy-system-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = legacy-system
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:31:51.670 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:31:52.001 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:31:52.002 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:31:52.002 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173111999
2025-11-03 13:31:52.038 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Subscribed to topic(s): check-out-completed
2025-11-03 13:31:52.055 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-email-service-2
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = email-service
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:31:52.058 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:31:52.092 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:31:52.092 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:31:52.092 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173112092
2025-11-03 13:31:52.123 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-2, groupId=email-service] Subscribed to topic(s): check-out-completed
2025-11-03 13:31:52.286 [main] INFO  com.siemens.clock.ClockApplication - Started ClockApplication in 16.101 seconds (process running for 16.61)
2025-11-03 13:31:53.603 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-email-service-2, groupId=email-service] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:31:53.603 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:31:53.606 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:31:53.613 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] (Re-)joining group
2025-11-03 13:31:53.616 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:31:53.619 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] (Re-)joining group
2025-11-03 13:31:53.656 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: need to re-join with the given member-id: consumer-legacy-system-1-55c2b790-4254-43f6-b67e-d435f26006aa
2025-11-03 13:31:53.656 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] (Re-)joining group
2025-11-03 13:31:53.659 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: need to re-join with the given member-id: consumer-email-service-2-3dfbd9e6-cb7e-4410-9d56-ffefd4bdc28d
2025-11-03 13:31:53.660 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] (Re-)joining group
2025-11-03 13:31:53.666 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Successfully joined group with generation Generation{generationId=39, memberId='consumer-legacy-system-1-55c2b790-4254-43f6-b67e-d435f26006aa', protocol='range'}
2025-11-03 13:31:53.667 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Successfully joined group with generation Generation{generationId=39, memberId='consumer-email-service-2-3dfbd9e6-cb7e-4410-9d56-ffefd4bdc28d', protocol='range'}
2025-11-03 13:31:53.684 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Finished assignment for group at generation 39: {consumer-email-service-2-3dfbd9e6-cb7e-4410-9d56-ffefd4bdc28d=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:31:53.684 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Finished assignment for group at generation 39: {consumer-legacy-system-1-55c2b790-4254-43f6-b67e-d435f26006aa=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:31:53.699 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Successfully synced group in generation Generation{generationId=39, memberId='consumer-email-service-2-3dfbd9e6-cb7e-4410-9d56-ffefd4bdc28d', protocol='range'}
2025-11-03 13:31:53.700 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Successfully synced group in generation Generation{generationId=39, memberId='consumer-legacy-system-1-55c2b790-4254-43f6-b67e-d435f26006aa', protocol='range'}
2025-11-03 13:31:53.701 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:31:53.702 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:31:53.707 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-2, groupId=email-service] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:31:53.707 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:31:53.728 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=45, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:31:53.728 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=45, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:31:53.732 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions assigned: [check-out-completed-0]
2025-11-03 13:31:53.732 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions assigned: [check-out-completed-0]
2025-11-03 13:32:04.431 [http-nio-8084-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 13:32:04.432 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 13:32:04.438 [http-nio-8084-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-03 13:32:04.881 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: y0z1a2b3
2025-11-03 13:32:05.391 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:32:05.392 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - hours worked = 0.06666666666666667
2025-11-03 13:32:05.428 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - check-out event = 0011b6dd-d908-4466-98f0-60f97d31b135
2025-11-03 13:32:05.583 [http-nio-8084-exec-2] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 13:32:05.629 [http-nio-8084-exec-2] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:32:05.678 [http-nio-8084-exec-2] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 13:32:05.748 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:32:05.749 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:32:05.749 [http-nio-8084-exec-2] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173125748
2025-11-03 13:32:05.808 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:32:05.843 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 18 with epoch 0
2025-11-03 13:32:06.082 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: y0z1a2b3
2025-11-03 13:32:06.082 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: y0z1a2b3
2025-11-03 13:32:06.096 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:06.096 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:06.108 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:06.109 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:06.112 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 13:32:06.112 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: y0z1a2b3
2025-11-03 13:32:06.173 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:32:06.173 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:06.188 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:06.188 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:06.195 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.07 hours today, to=y0z1a2b3@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:06.195 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=y0z1a2b3, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:06.370 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to y0z1a2b3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:32:06.371 [http-nio-8084-exec-3] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for y0z1a2b3@company.com
2025-11-03 13:32:06.371 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee y0z1a2b3
2025-11-03 13:32:06.371 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee y0z1a2b3
2025-11-03 13:32:06.424 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:06.424 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:06.427 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:06.428 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:06.432 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:06.432 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:06.440 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:06.438427800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 320 ms
2025-11-03 13:32:06.440 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:06.438427800+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 320 ms
2025-11-03 13:32:08.460 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:08.461 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:08.462 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: y0z1a2b3
2025-11-03 13:32:08.463 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 13:32:08.463 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:32:08.465 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:08.467 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:08.467 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.07 hours today, to=y0z1a2b3@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:08.469 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:08.470 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=y0z1a2b3, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:08.496 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee y0z1a2b3
2025-11-03 13:32:08.497 [http-nio-8084-exec-6] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee y0z1a2b3
2025-11-03 13:32:08.504 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:08.505 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:08.495 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to y0z1a2b3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:32:08.507 [http-nio-8084-exec-5] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for y0z1a2b3@company.com
2025-11-03 13:32:08.506 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:08.509 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:08.509486400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 43 ms
2025-11-03 13:32:08.513 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:08.514 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:08.519 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:08.521 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:08.521491200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 57 ms
2025-11-03 13:32:08.524 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: y0z1a2b3, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:08.527 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: y0z1a2b3, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:10.529 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:10.530 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 13:32:10.531 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:10.533 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:10.535 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=y0z1a2b3, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:10.562 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee y0z1a2b3
2025-11-03 13:32:12.740 [http-nio-8084-exec-8] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: e2f4g6h8
2025-11-03 13:32:12.751 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:32:12.752 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - hours worked = 0.06666666666666667
2025-11-03 13:32:12.753 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - check-out event = 23d204fc-8c89-47c7-b416-06b9627e41bf
2025-11-03 13:32:12.770 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: e2f4g6h8
2025-11-03 13:32:12.771 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:12.773 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:12.774 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:32:12.775 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:32:12.780 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:12.781 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.07 hours today, to=e2f4g6h8@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:12.801 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:32:12.802 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for e2f4g6h8@company.com
2025-11-03 13:32:12.811 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:12.816 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:12.820 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:12.823 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:12.822141400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 45 ms
2025-11-03 13:32:14.835 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:32:14.836 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:32:14.837 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:32:14.839 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:14.839 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{body=You worked 0.07 hours today, to=e2f4g6h8@company.com, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:14.853 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:32:14.854 [http-nio-8084-exec-10] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for e2f4g6h8@company.com
2025-11-03 13:32:14.860 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:14.863 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:14.866 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:14.867 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:14.867725+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 30 ms
2025-11-03 13:32:14.869 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.siemens.clock.service.EmailService - Fallback triggered for email to: e2f4g6h8, error: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:14.869 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Email DLQ - Employee: e2f4g6h8, Error: Resilience fallback: Email service returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:15.300 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:32:15.301 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:15.363 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: y0z1a2b3
2025-11-03 13:32:15.363 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:32:15.363 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:32:15.363568100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4833 ms
2025-11-03 13:32:15.381 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: e2f4g6h8
2025-11-03 13:32:15.383 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:15.386 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:15.387 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:32:15.388 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:15.389 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:15.391 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:15.402 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee e2f4g6h8
2025-11-03 13:32:15.403 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:32:15.406 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:15.408 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:15.411 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:15.413 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:15.413071+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 24 ms
2025-11-03 13:32:17.416 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:17.416 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:32:17.417 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:17.418 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:17.418 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:17.424 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee e2f4g6h8
2025-11-03 13:32:17.425 [http-nio-8084-exec-2] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:32:17.428 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:32:17.429 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:17.431 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:32:17.437 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:32:17.437455800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 15 ms
2025-11-03 13:32:19.441 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:32:19.442 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:32:19.443 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:32:19.444 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:32:19.444 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.06666666666666667}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:32:19.456 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.06666666666666667 hours for employee e2f4g6h8
2025-11-03 13:32:24.022 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:32:24.023 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:32:24.041 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: e2f4g6h8
2025-11-03 13:32:24.042 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:32:24.042 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:32:24.042928400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4600 ms
2025-11-03 13:39:57.646 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-2, groupId=email-service] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:39:57.646 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Revoke previously assigned partitions check-out-completed-0
2025-11-03 13:39:57.653 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions revoked: [check-out-completed-0]
2025-11-03 13:39:57.653 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions revoked: [check-out-completed-0]
2025-11-03 13:39:57.654 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Member consumer-legacy-system-1-55c2b790-4254-43f6-b67e-d435f26006aa sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:39:57.654 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Member consumer-email-service-2-3dfbd9e6-cb7e-4410-9d56-ffefd4bdc28d sending LeaveGroup request to coordinator host.docker.internal:9092 (id: 2147483647 rack: null) due to the consumer unsubscribed from all topics
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.655 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-2, groupId=email-service] Unsubscribed all topics or patterns and assigned partitions
2025-11-03 13:39:57.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.661 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Resetting generation and member id due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.661 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-2, groupId=email-service] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.662 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-1, groupId=legacy-system] Request joining group due to: consumer pro-actively leaving the group
2025-11-03 13:39:57.729 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:39:57.730 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:39:57.731 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:39:57.732 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:39:57.764 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-legacy-system-1 unregistered
2025-11-03 13:39:57.769 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: Consumer stopped
2025-11-03 13:39:57.855 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:39:57.855 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:39:57.856 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:39:57.856 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:39:57.866 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-email-service-2 unregistered
2025-11-03 13:39:57.870 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: Consumer stopped
2025-11-03 13:39:57.876 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-03 13:39:57.988 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-03 13:39:57.992 [SpringApplicationShutdownHook] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2025-11-03 13:39:57.998 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-11-03 13:39:57.999 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-11-03 13:39:57.999 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.telemetry.internals.ClientTelemetryReporter
2025-11-03 13:39:57.999 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-11-03 13:39:57.999 [SpringApplicationShutdownHook] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for clock-producer-1 unregistered
2025-11-03 13:39:58.013 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:39:58.030 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-03 13:39:58.040 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-03 13:40:05.937 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:40:06.000 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 51512 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:40:06.001 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:40:06.002 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:40:07.075 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.076 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.077 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.095 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.097 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.098 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.139 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.139 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.139 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.155 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.155 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.155 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.168 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.168 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.168 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.191 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.192 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.192 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.207 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:40:07.207 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:40:07.207 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:40:07.489 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:40:07.558 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 57 ms. Found 1 JPA repository interface.
2025-11-03 13:40:09.082 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:40:09.101 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:40:09.104 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:40:09.104 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:40:09.214 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:40:09.215 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3145 ms
2025-11-03 13:40:09.427 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'webMvcObservationFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/observation/web/servlet/WebMvcObservationAutoConfiguration.class]: Unsatisfied dependency expressed through method 'webMvcObservationFilter' parameter 0: Error creating bean with name 'observationRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/observation/ObservationAutoConfiguration.class]: Error creating bean with name 'defaultMeterObservationHandler' defined in class path resource [org/springframework/boot/actuate/autoconfigure/observation/ObservationAutoConfiguration$MeterObservationHandlerConfiguration$OnlyMetricsMeterObservationHandlerConfiguration.class]: Unsatisfied dependency expressed through method 'defaultMeterObservationHandler' parameter 0: Error creating bean with name 'prometheusMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusMetricsExportAutoConfiguration.class]: Error creating bean with name 'propertiesMeterFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/MetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method 'propertiesMeterFilter' parameter 0: Error creating bean with name 'management.metrics-org.springframework.boot.actuate.autoconfigure.metrics.MetricsProperties': Could not bind properties to 'MetricsProperties' : prefix=management.metrics, ignoreInvalidFields=false, ignoreUnknownFields=true
2025-11-03 13:40:09.465 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-03 13:40:09.480 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-11-03 13:40:09.501 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-03 13:40:09.538 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to bind properties under 'management.metrics.distribution.percentiles-histogram.percentiles.http.server.requests' to java.lang.Boolean:

    Property: management.metrics.distribution.percentiles-histogram.percentiles.http.server.requests
    Value: "0.5,0.95,0.99"
    Origin: class path resource [application.yml] - 107:33
    Reason: failed to convert java.lang.String to java.lang.Boolean (caused by java.lang.IllegalArgumentException: Invalid boolean value '0.5,0.95,0.99')

Action:

Update your application's configuration

2025-11-03 13:41:37.212 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-03 13:41:37.287 [main] INFO  com.siemens.clock.ClockApplication - Starting ClockApplication using Java 17.0.9 with PID 38304 (C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock\target\classes started by kalpa in C:\Users\kalpa\projects\siemens_energy\siemens_energy_backend_service\clock)
2025-11-03 13:41:37.289 [main] DEBUG com.siemens.clock.ClockApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-03 13:41:37.290 [main] INFO  com.siemens.clock.ClockApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-03 13:41:38.387 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.390 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.391 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.403 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.403 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.404 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.444 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.445 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.445 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.461 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.461 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.462 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.474 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.474 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.474 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.490 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.490 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.490 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.507 [main] DEBUG i.g.r.s.u.RxJava2OnClasspathCondition - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-11-03 13:41:38.507 [main] DEBUG i.g.r.s.u.RxJava3OnClasspathCondition - RxJava3 related Aspect extensions are not activated, because RxJava3 is not on the classpath.
2025-11-03 13:41:38.508 [main] DEBUG i.g.r.s.u.ReactorOnClasspathCondition - Reactor related Aspect extensions are not activated because Reactor is not on the classpath.
2025-11-03 13:41:38.818 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-03 13:41:38.888 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 1 JPA repository interface.
2025-11-03 13:41:40.229 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8084 (http)
2025-11-03 13:41:40.240 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8084"]
2025-11-03 13:41:40.242 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-03 13:41:40.242 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-03 13:41:40.323 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-03 13:41:40.323 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2963 ms
2025-11-03 13:41:40.923 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-03 13:41:41.007 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-03 13:41:41.067 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-03 13:41:41.449 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-03 13:41:41.493 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-03 13:41:41.802 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1c36ab22
2025-11-03 13:41:41.805 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-03 13:41:41.858 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-03 13:41:41.886 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-03 13:41:43.285 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-03 13:41:43.385 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-03 13:41:43.942 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-03 13:41:45.650 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-03 13:41:46.971 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 7 endpoints beneath base path '/actuator'
2025-11-03 13:41:47.131 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8084"]
2025-11-03 13:41:47.154 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8084 (http) with context path '/'
2025-11-03 13:41:47.236 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-email-service-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = email-service
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:41:47.309 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:41:47.569 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:41:47.569 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:41:47.569 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173707566
2025-11-03 13:41:47.593 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-email-service-1, groupId=email-service] Subscribed to topic(s): check-out-completed
2025-11-03 13:41:47.608 [main] INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.include.jmx.reporter = true
	auto.offset.reset = earliest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-legacy-system-2
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	enable.metrics.push = true
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = legacy-system
	group.instance.id = null
	group.protocol = classic
	group.remote.assignor = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.springframework.kafka.support.serializer.JsonDeserializer

2025-11-03 13:41:47.608 [main] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:41:47.617 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:41:47.617 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:41:47.617 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173707617
2025-11-03 13:41:47.625 [main] INFO  o.a.k.c.c.i.ClassicKafkaConsumer - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Subscribed to topic(s): check-out-completed
2025-11-03 13:41:47.645 [main] INFO  com.siemens.clock.ClockApplication - Started ClockApplication in 11.16 seconds (process running for 11.675)
2025-11-03 13:41:48.328 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-email-service-1, groupId=email-service] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:41:48.329 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:41:48.329 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:41:48.329 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Discovered group coordinator host.docker.internal:9092 (id: 2147483647 rack: null)
2025-11-03 13:41:48.338 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:41:48.339 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:41:48.367 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Request joining group due to: need to re-join with the given member-id: consumer-email-service-1-eb3a7fb5-7c09-4cae-82f0-798acd76dde1
2025-11-03 13:41:48.367 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Request joining group due to: need to re-join with the given member-id: consumer-legacy-system-2-5a22abc4-ad0f-4281-8fd8-4478c2bd1925
2025-11-03 13:41:48.368 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] (Re-)joining group
2025-11-03 13:41:48.368 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] (Re-)joining group
2025-11-03 13:41:48.375 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully joined group with generation Generation{generationId=41, memberId='consumer-email-service-1-eb3a7fb5-7c09-4cae-82f0-798acd76dde1', protocol='range'}
2025-11-03 13:41:48.377 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully joined group with generation Generation{generationId=41, memberId='consumer-legacy-system-2-5a22abc4-ad0f-4281-8fd8-4478c2bd1925', protocol='range'}
2025-11-03 13:41:48.387 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Finished assignment for group at generation 41: {consumer-email-service-1-eb3a7fb5-7c09-4cae-82f0-798acd76dde1=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:41:48.387 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Finished assignment for group at generation 41: {consumer-legacy-system-2-5a22abc4-ad0f-4281-8fd8-4478c2bd1925=Assignment(partitions=[check-out-completed-0])}
2025-11-03 13:41:48.396 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Successfully synced group in generation Generation{generationId=41, memberId='consumer-email-service-1-eb3a7fb5-7c09-4cae-82f0-798acd76dde1', protocol='range'}
2025-11-03 13:41:48.396 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Successfully synced group in generation Generation{generationId=41, memberId='consumer-legacy-system-2-5a22abc4-ad0f-4281-8fd8-4478c2bd1925', protocol='range'}
2025-11-03 13:41:48.396 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-email-service-1, groupId=email-service] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:41:48.396 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Notifying assignor about the new Assignment(partitions=[check-out-completed-0])
2025-11-03 13:41:48.399 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-email-service-1, groupId=email-service] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:41:48.399 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.i.ConsumerRebalanceListenerInvoker - [Consumer clientId=consumer-legacy-system-2, groupId=legacy-system] Adding newly assigned partitions: check-out-completed-0
2025-11-03 13:41:48.412 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=47, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:41:48.412 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.a.k.c.c.internals.ConsumerUtils - Setting offset for partition check-out-completed-0 to the committed offset FetchPosition{offset=47, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[host.docker.internal:9092 (id: 0 rack: null)], epoch=0}}
2025-11-03 13:41:48.414 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - email-service: partitions assigned: [check-out-completed-0]
2025-11-03 13:41:48.414 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  o.s.k.l.KafkaMessageListenerContainer - legacy-system: partitions assigned: [check-out-completed-0]
2025-11-03 13:42:53.726 [http-nio-8084-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 13:42:53.729 [http-nio-8084-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-03 13:42:53.741 [http-nio-8084-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-03 13:42:54.769 [http-nio-8084-exec-1] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: k2l3m4n5
2025-11-03 13:43:02.987 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: g8h9i0j1
2025-11-03 13:43:08.367 [http-nio-8084-exec-4] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: c4d5e6f7
2025-11-03 13:43:13.699 [http-nio-8084-exec-5] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: y0z1a2b3
2025-11-03 13:43:19.876 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: u4v7w8x9
2025-11-03 13:43:25.024 [http-nio-8084-exec-7] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: q6r5s1t3
2025-11-03 13:43:30.051 [http-nio-8084-exec-9] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: m7n8o2p4
2025-11-03 13:43:35.324 [http-nio-8084-exec-8] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: i9j1k3l5
2025-11-03 13:43:40.809 [http-nio-8084-exec-10] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: e2f4g6h8
2025-11-03 13:43:46.019 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_IN for employee: a1b3c5d7
2025-11-03 13:44:37.819 [http-nio-8084-exec-1] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: e2f4g6h8
2025-11-03 13:44:37.837 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:44:37.838 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - hours worked = 0.0
2025-11-03 13:44:37.845 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - check-out event = aa4570bf-b737-42f3-9b6c-c4214c4e96fc
2025-11-03 13:44:37.872 [http-nio-8084-exec-1] INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	auto.include.jmx.reporter = true
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = clock-producer-1
	compression.gzip.level = -1
	compression.lz4.level = 9
	compression.type = none
	compression.zstd.level = 3
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	enable.metrics.push = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metadata.recovery.strategy = none
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.max.ms = 1000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.header.urlencode = false
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2025-11-03 13:44:37.875 [http-nio-8084-exec-1] INFO  o.a.k.c.t.i.KafkaMetricsCollector - initializing Kafka metrics collector
2025-11-03 13:44:37.909 [http-nio-8084-exec-1] INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=clock-producer-1] Instantiated an idempotent producer.
2025-11-03 13:44:37.966 [http-nio-8084-exec-1] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.9.1
2025-11-03 13:44:37.966 [http-nio-8084-exec-1] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: f745dfdcee2b9851
2025-11-03 13:44:37.966 [http-nio-8084-exec-1] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1762173877965
2025-11-03 13:44:37.985 [kafka-producer-network-thread | clock-producer-1] INFO  org.apache.kafka.clients.Metadata - [Producer clientId=clock-producer-1] Cluster ID: kdK9fOiMTnaJuwKmImKciQ
2025-11-03 13:44:37.990 [kafka-producer-network-thread | clock-producer-1] INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=clock-producer-1] ProducerId set to 19 with epoch 0
2025-11-03 13:44:38.220 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: e2f4g6h8
2025-11-03 13:44:38.222 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: e2f4g6h8
2025-11-03 13:44:38.258 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:38.259 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:38.279 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:38.285 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:38.286 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:44:38.286 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: e2f4g6h8
2025-11-03 13:44:38.376 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:44:38.376 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:38.402 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:38.402 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:38.417 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=e2f4g6h8@company.com, body=You worked 0.00 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:38.418 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.0}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:38.591 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to e2f4g6h8@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:44:38.591 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee e2f4g6h8
2025-11-03 13:44:38.593 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:44:38.640 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:38.643 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:38.650 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:44:38.659 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:44:38.657450100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 364 ms
2025-11-03 13:44:40.101 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:40.103 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:40.167 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: e2f4g6h8
2025-11-03 13:44:40.167 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:44:40.167 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:40.167472400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1881 ms
2025-11-03 13:44:40.669 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:40.670 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:44:40.672 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:40.674 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:40.675 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.0}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:40.710 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee e2f4g6h8
2025-11-03 13:44:40.712 [http-nio-8084-exec-5] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:44:40.730 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:40.732 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:40.741 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:44:40.743 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:44:40.743058500+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 69 ms
2025-11-03 13:44:42.759 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:42.760 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: e2f4g6h8
2025-11-03 13:44:42.761 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:42.762 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:42.763 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=e2f4g6h8, hoursWorked=0.0}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:42.771 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.0 hours for employee e2f4g6h8
2025-11-03 13:44:42.772 [http-nio-8084-exec-6] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee e2f4g6h8
2025-11-03 13:44:42.776 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:42.777 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:42.779 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:44:42.781 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:44:42.781291+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 19 ms
2025-11-03 13:44:42.785 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.s.c.service.LegacySystemService - Fallback triggered for employee: e2f4g6h8, error: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:42.786 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Legacy DLQ - Employee: e2f4g6h8, Error: Resilience fallback: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:46.880 [http-nio-8084-exec-7] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: a1b3c5d7
2025-11-03 13:44:46.890 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:44:46.890 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:44:46.891 [http-nio-8084-exec-7] INFO  c.s.clock.service.AttendanceService - check-out event = 9521e60b-cb92-4e50-9b5e-81f1ae75a870
2025-11-03 13:44:46.913 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: a1b3c5d7
2025-11-03 13:44:46.914 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:46.915 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: a1b3c5d7
2025-11-03 13:44:46.916 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:46.916 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:46.916 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:44:46.916 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:46.917 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: a1b3c5d7
2025-11-03 13:44:46.917 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:46.919 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:46.921 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=a1b3c5d7, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:46.921 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:44:46.922 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:46.923 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=a1b3c5d7@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:46.934 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee a1b3c5d7
2025-11-03 13:44:46.936 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:44:46.937 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to a1b3c5d7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:44:46.941 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:46.942 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:46.944 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:44:46.945 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:44:46.945474600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 27 ms
2025-11-03 13:44:48.343 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:48.344 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:48.408 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: a1b3c5d7
2025-11-03 13:44:48.408 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:44:48.408 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:48.408425300+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1491 ms
2025-11-03 13:44:48.959 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:48.961 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:44:48.961 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:48.962 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:48.963 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=a1b3c5d7, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:48.969 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee a1b3c5d7
2025-11-03 13:44:48.969 [http-nio-8084-exec-10] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee a1b3c5d7
2025-11-03 13:44:48.973 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:44:48.976 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:48.978 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:44:48.979 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:44:48.979879400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 17 ms
2025-11-03 13:44:50.985 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:50.985 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: a1b3c5d7
2025-11-03 13:44:50.986 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:50.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:50.988 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=a1b3c5d7, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:50.997 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee a1b3c5d7
2025-11-03 13:44:52.653 [http-nio-8084-exec-1] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: k2l3m4n5
2025-11-03 13:44:52.661 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:44:52.662 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:44:52.665 [http-nio-8084-exec-1] INFO  c.s.clock.service.AttendanceService - check-out event = 1e918105-b7bd-43d6-9cb9-5d1113e136e3
2025-11-03 13:44:52.674 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: k2l3m4n5
2025-11-03 13:44:52.675 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:52.676 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:52.676 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: k2l3m4n5
2025-11-03 13:44:52.677 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:44:52.680 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:52.683 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=k2l3m4n5@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:52.697 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to k2l3m4n5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:44:53.591 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:53.593 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:53.614 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: k2l3m4n5
2025-11-03 13:44:53.615 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:44:53.616 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:53.616308200+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 939 ms
2025-11-03 13:44:53.851 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:53.853 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:53.880 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: a1b3c5d7
2025-11-03 13:44:53.882 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:44:53.882 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:53.882029900+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2896 ms
2025-11-03 13:44:53.898 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: k2l3m4n5
2025-11-03 13:44:53.900 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:53.902 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:53.905 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: k2l3m4n5
2025-11-03 13:44:53.907 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:53.907 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:53.908 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=k2l3m4n5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:53.915 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee k2l3m4n5
2025-11-03 13:44:58.133 [http-nio-8084-exec-5] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: g8h9i0j1
2025-11-03 13:44:58.144 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:44:58.145 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:44:58.146 [http-nio-8084-exec-5] INFO  c.s.clock.service.AttendanceService - check-out event = 2e61b887-8fb4-483f-bf44-c7db9a832be1
2025-11-03 13:44:58.158 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: g8h9i0j1
2025-11-03 13:44:58.159 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:58.159 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:44:58.160 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: g8h9i0j1
2025-11-03 13:44:58.161 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:44:58.162 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:58.163 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=g8h9i0j1@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:58.171 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to g8h9i0j1@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:44:58.682 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:58.683 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:58.708 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: k2l3m4n5
2025-11-03 13:44:58.708 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:44:58.709 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:58.709756400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4804 ms
2025-11-03 13:44:58.727 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: g8h9i0j1
2025-11-03 13:44:58.730 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:58.733 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:44:58.734 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: g8h9i0j1
2025-11-03 13:44:58.735 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:44:58.742 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:44:58.744 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=g8h9i0j1, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:44:58.761 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee g8h9i0j1
2025-11-03 13:44:59.081 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:44:59.081 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:44:59.117 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: g8h9i0j1
2025-11-03 13:44:59.118 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:44:59.118 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:44:59.118622100+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 958 ms
2025-11-03 13:45:01.452 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:01.453 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:01.468 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: g8h9i0j1
2025-11-03 13:45:01.469 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:45:01.469 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:01.469638100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2734 ms
2025-11-03 13:45:04.168 [http-nio-8084-exec-9] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: c4d5e6f7
2025-11-03 13:45:04.178 [http-nio-8084-exec-9] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:04.179 [http-nio-8084-exec-9] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:04.182 [http-nio-8084-exec-9] INFO  c.s.clock.service.AttendanceService - check-out event = 52a21c5a-62d5-446e-a193-d836d5eca24e
2025-11-03 13:45:04.194 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: c4d5e6f7
2025-11-03 13:45:04.194 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: c4d5e6f7
2025-11-03 13:45:04.194 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:04.195 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:04.195 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:04.195 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: c4d5e6f7
2025-11-03 13:45:04.196 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:04.196 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: c4d5e6f7
2025-11-03 13:45:04.197 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:04.201 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:04.202 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:04.203 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=c4d5e6f7, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:04.204 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:04.204 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=c4d5e6f7@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:04.230 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee c4d5e6f7
2025-11-03 13:45:04.231 [http-nio-8084-exec-8] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee c4d5e6f7
2025-11-03 13:45:04.234 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to c4d5e6f7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:04.235 [http-nio-8084-exec-10] WARN  c.s.clock.mock.MockExternalService - MOCK EMAIL: Simulating failure for c4d5e6f7@company.com
2025-11-03 13:45:04.248 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:04.249 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:04.261 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:04.263 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:04.270 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:04.272 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:04.272737500+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 74 ms
2025-11-03 13:45:04.277 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' ignored an exception:
com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.EmailService.sendCheckOutEmail(EmailService.java:57)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.EmailService$$SpringCGLIB$$0.sendCheckOutEmail(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleEmailNotification(CheckOutEventConsumer.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:04.280 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:04.280197400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded an error which has been ignored: 'com.siemens.clock.exception.EmailServiceException: Email service returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 80 ms
2025-11-03 13:45:06.280 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:06.281 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: c4d5e6f7
2025-11-03 13:45:06.281 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:06.283 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:06.283 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=c4d5e6f7, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:06.290 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee c4d5e6f7
2025-11-03 13:45:06.296 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:06.296 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: c4d5e6f7
2025-11-03 13:45:06.297 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:06.298 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:06.298 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=c4d5e6f7@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:06.304 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to c4d5e6f7@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:08.176 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:08.177 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:08.195 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: c4d5e6f7
2025-11-03 13:45:08.196 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:08.197 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:08.196874100+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1900 ms
2025-11-03 13:45:09.485 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:09.485 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:09.503 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: c4d5e6f7
2025-11-03 13:45:09.504 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:45:09.505 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:09.504841900+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3224 ms
2025-11-03 13:45:10.279 [http-nio-8084-exec-2] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: y0z1a2b3
2025-11-03 13:45:10.287 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:10.287 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:10.288 [http-nio-8084-exec-2] INFO  c.s.clock.service.AttendanceService - check-out event = b2c59de9-1e85-42c1-9a77-c14e5131deb8
2025-11-03 13:45:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: y0z1a2b3
2025-11-03 13:45:10.301 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:10.302 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:10.303 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: y0z1a2b3
2025-11-03 13:45:10.304 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: y0z1a2b3
2025-11-03 13:45:10.305 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:10.305 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:10.306 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:10.306 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:10.307 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: y0z1a2b3
2025-11-03 13:45:10.307 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=y0z1a2b3, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:10.308 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:10.309 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:10.312 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=y0z1a2b3@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:10.322 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee y0z1a2b3
2025-11-03 13:45:10.323 [http-nio-8084-exec-3] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to y0z1a2b3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:12.116 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:12.117 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:12.132 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: y0z1a2b3
2025-11-03 13:45:12.132 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:12.133 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:12.133432800+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1825 ms
2025-11-03 13:45:14.559 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:14.559 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:14.605 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: y0z1a2b3
2025-11-03 13:45:14.605 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:45:14.605 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:14.605826200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 4303 ms
2025-11-03 13:45:15.826 [http-nio-8084-exec-6] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: u4v7w8x9
2025-11-03 13:45:15.840 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:15.841 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:15.844 [http-nio-8084-exec-6] INFO  c.s.clock.service.AttendanceService - check-out event = f62d1b04-db23-4b37-87a6-74dc35dabb15
2025-11-03 13:45:15.867 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: u4v7w8x9
2025-11-03 13:45:15.868 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:15.870 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: u4v7w8x9
2025-11-03 13:45:15.871 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:15.871 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:15.872 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: u4v7w8x9
2025-11-03 13:45:15.872 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:15.873 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:15.873 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: u4v7w8x9
2025-11-03 13:45:15.875 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:15.875 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=u4v7w8x9, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:15.875 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:15.877 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:15.878 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=u4v7w8x9@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:15.899 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee u4v7w8x9
2025-11-03 13:45:15.900 [http-nio-8084-exec-7] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee u4v7w8x9
2025-11-03 13:45:15.902 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to u4v7w8x9@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:15.908 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:15.909 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:15.912 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:15.913 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:15.913239200+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 40 ms
2025-11-03 13:45:16.420 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:16.421 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:16.436 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: u4v7w8x9
2025-11-03 13:45:16.437 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:16.437 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:16.437863+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 564 ms
2025-11-03 13:45:17.919 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:17.920 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: u4v7w8x9
2025-11-03 13:45:17.921 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:17.921 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:17.921 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=u4v7w8x9, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:17.930 [http-nio-8084-exec-8] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee u4v7w8x9
2025-11-03 13:45:21.775 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:21.775 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:21.793 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: u4v7w8x9
2025-11-03 13:45:21.793 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:45:21.794 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:21.793952800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 3873 ms
2025-11-03 13:45:22.047 [http-nio-8084-exec-10] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: q6r5s1t3
2025-11-03 13:45:22.075 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:22.076 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:22.081 [http-nio-8084-exec-10] INFO  c.s.clock.service.AttendanceService - check-out event = 2a28c5bd-6f5b-4b7b-8e43-f16fcff1ced7
2025-11-03 13:45:22.121 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: q6r5s1t3
2025-11-03 13:45:22.122 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:22.130 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:22.132 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:45:22.133 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:22.138 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:22.139 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=q6r5s1t3, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:22.141 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: q6r5s1t3
2025-11-03 13:45:22.160 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:22.160 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:22.161 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: q6r5s1t3
2025-11-03 13:45:22.169 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:22.172 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee q6r5s1t3
2025-11-03 13:45:22.173 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee q6r5s1t3
2025-11-03 13:45:22.171 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:22.174 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=q6r5s1t3@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:22.182 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:22.183 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:22.191 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:22.197 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:22.197529800+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 59 ms
2025-11-03 13:45:22.198 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to q6r5s1t3@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:23.794 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:23.795 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:23.815 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: q6r5s1t3
2025-11-03 13:45:23.816 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:23.816 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:23.816989400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1655 ms
2025-11-03 13:45:24.198 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:24.199 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: q6r5s1t3
2025-11-03 13:45:24.199 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:24.203 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:24.204 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=q6r5s1t3, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:24.216 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee q6r5s1t3
2025-11-03 13:45:26.945 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:26.946 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:26.961 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Successfully reported hours for employee: q6r5s1t3
2025-11-03 13:45:26.961 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' succeeded:
2025-11-03 13:45:26.962 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:26.961824600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded a successful call. Elapsed time: 2762 ms
2025-11-03 13:45:27.839 [http-nio-8084-exec-3] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: m7n8o2p4
2025-11-03 13:45:27.852 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:27.853 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:27.856 [http-nio-8084-exec-3] INFO  c.s.clock.service.AttendanceService - check-out event = 3e0fdeec-bd59-49b0-95a4-71432283ab19
2025-11-03 13:45:27.871 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: m7n8o2p4
2025-11-03 13:45:27.873 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:27.873 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: m7n8o2p4
2025-11-03 13:45:27.876 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:27.878 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: m7n8o2p4
2025-11-03 13:45:27.880 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:27.881 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:27.881 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:27.883 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:45:27.885 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:27.887 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=m7n8o2p4@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:27.885 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:27.893 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:27.893 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=m7n8o2p4, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:27.898 [http-nio-8084-exec-5] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to m7n8o2p4@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:27.915 [http-nio-8084-exec-6] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:45:27.916 [http-nio-8084-exec-6] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee m7n8o2p4
2025-11-03 13:45:27.921 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:27.922 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:27.925 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:27.926 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:27.926335400+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 43 ms
2025-11-03 13:45:29.794 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:29.795 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:29.810 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: m7n8o2p4
2025-11-03 13:45:29.811 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:29.811 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:29.811673900+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1933 ms
2025-11-03 13:45:29.932 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:29.932 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:45:29.933 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:29.933 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:29.933 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=m7n8o2p4, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:29.939 [http-nio-8084-exec-7] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:45:29.939 [http-nio-8084-exec-7] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee m7n8o2p4
2025-11-03 13:45:29.946 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:29.948 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:29.951 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:29.952 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:29.951303700+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 18 ms
2025-11-03 13:45:31.965 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:31.966 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: m7n8o2p4
2025-11-03 13:45:31.966 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:31.966 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:31.967 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=m7n8o2p4, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:31.976 [http-nio-8084-exec-9] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee m7n8o2p4
2025-11-03 13:45:31.977 [http-nio-8084-exec-9] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee m7n8o2p4
2025-11-03 13:45:31.981 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:31.983 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:31.985 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:31.986 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:31.986265600+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 19 ms
2025-11-03 13:45:31.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.s.c.service.LegacySystemService - Fallback triggered for employee: m7n8o2p4, error: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:31.987 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Legacy DLQ - Employee: m7n8o2p4, Error: Resilience fallback: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:33.827 [http-nio-8084-exec-8] INFO  c.s.c.controller.ClockInController - Received attendance request: CHECK_OUT for employee: i9j1k3l5
2025-11-03 13:45:33.835 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - inside handleCheckOut
2025-11-03 13:45:33.835 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - hours worked = 0.016666666666666666
2025-11-03 13:45:33.837 [http-nio-8084-exec-8] INFO  c.s.clock.service.AttendanceService - check-out event = a12c7724-155c-418d-96b0-199eeddedcc3
2025-11-03 13:45:33.857 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for email notification: i9j1k3l5
2025-11-03 13:45:33.858 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'email-service' with max attempts rate '2'  for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:33.859 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'email-service' with failure rate '50.0' for method: 'com.siemens.clock.service.EmailService#sendCheckOutEmail'
2025-11-03 13:45:33.859 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Sending email to employee: i9j1k3l5
2025-11-03 13:45:33.865 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.kafka.CheckOutEventConsumer - Received check-out event for legacy reporting: i9j1k3l5
2025-11-03 13:45:33.865 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.retry.configure.RetryAspect - Created or retrieved retry 'legacy-api' with max attempts rate '3'  for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:33.864 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/email/send
2025-11-03 13:45:33.868 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:33.869 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:45:33.869 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:33.870 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{to=i9j1k3l5@company.com, body=You worked 0.02 hours today, subject=Daily Work Summary - 2025-11-03}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:33.870 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:33.871 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:33.872 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:33.879 [http-nio-8084-exec-10] INFO  c.s.clock.mock.MockExternalService - MOCK EMAIL: Sending email to i9j1k3l5@company.com - Daily Work Summary - 2025-11-03
2025-11-03 13:45:33.882 [http-nio-8084-exec-4] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:45:33.882 [http-nio-8084-exec-4] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee i9j1k3l5
2025-11-03 13:45:33.885 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:33.885 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:33.886 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:33.887 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:33.887839100+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 17 ms
2025-11-03 13:45:35.335 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 200 OK
2025-11-03 13:45:35.335 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:35.354 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  c.siemens.clock.service.EmailService - Successfully sent email to employee: i9j1k3l5
2025-11-03 13:45:35.354 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'email-service' succeeded:
2025-11-03 13:45:35.354 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event SUCCESS published: 2025-11-03T13:45:35.354917400+01:00[Europe/Berlin]: CircuitBreaker 'email-service' recorded a successful call. Elapsed time: 1495 ms
2025-11-03 13:45:35.906 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:35.907 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:45:35.908 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:35.908 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:35.910 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:35.919 [http-nio-8084-exec-1] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:45:35.919 [http-nio-8084-exec-1] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee i9j1k3l5
2025-11-03 13:45:35.922 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:35.923 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:35.925 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:35.926 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:35.925575+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 17 ms
2025-11-03 13:45:37.932 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.s.c.c.CircuitBreakerAspect - Created or retrieved circuit breaker 'legacy-api' with failure rate '50.0' for method: 'com.siemens.clock.service.LegacySystemService#reportHoursWorked'
2025-11-03 13:45:37.932 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] INFO  c.s.c.service.LegacySystemService - Reporting hours to legacy system for employee: i9j1k3l5
2025-11-03 13:45:37.933 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - HTTP POST http://localhost:8084/api/legacy/report
2025-11-03 13:45:37.934 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Accept=[application/json, application/*+json]
2025-11-03 13:45:37.935 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Writing [{employeeId=i9j1k3l5, hoursWorked=0.016666666666666666}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-11-03 13:45:37.941 [http-nio-8084-exec-2] INFO  c.s.clock.mock.MockExternalService - MOCK LEGACY: Reporting 0.016666666666666666 hours for employee i9j1k3l5
2025-11-03 13:45:37.942 [http-nio-8084-exec-2] WARN  c.s.clock.mock.MockExternalService - MOCK LEGACY: Simulating failure for employee i9j1k3l5
2025-11-03 13:45:37.947 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Response 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:37.948 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG o.s.web.client.RestTemplate - Reading to [java.util.Map<?, ?>]
2025-11-03 13:45:37.949 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - CircuitBreaker 'legacy-api' ignored an exception:
com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE
	at com.siemens.clock.service.LegacySystemService.reportHoursWorked(LegacySystemService.java:55)
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCheckedSupplier$0(CircuitBreaker.java:71)
	at io.github.resilience4j.circuitbreaker.CircuitBreaker.executeCheckedSupplier(CircuitBreaker.java:739)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.defaultHandling(CircuitBreakerAspect.java:179)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.proceed(CircuitBreakerAspect.java:126)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.lambda$circuitBreakerAroundAdvice$0(CircuitBreakerAspect.java:108)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:37)
	at io.github.resilience4j.spring6.circuitbreaker.configure.CircuitBreakerAspect.circuitBreakerAroundAdvice(CircuitBreakerAspect.java:109)
	at jdk.internal.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at io.github.resilience4j.retry.Retry.lambda$decorateCheckedSupplier$1(Retry.java:152)
	at io.github.resilience4j.retry.Retry.executeCheckedSupplier(Retry.java:512)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.handleDefaultJoinPoint(RetryAspect.java:175)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.proceed(RetryAspect.java:132)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.lambda$retryAroundAdvice$0(RetryAspect.java:116)
	at io.github.resilience4j.spring6.fallback.DefaultFallbackDecorator.lambda$decorate$0(DefaultFallbackDecorator.java:36)
	at io.github.resilience4j.spring6.fallback.FallbackExecutor.execute(FallbackExecutor.java:39)
	at io.github.resilience4j.spring6.retry.configure.RetryAspect.retryAroundAdvice(RetryAspect.java:117)
	at jdk.internal.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:649)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:631)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.siemens.clock.service.LegacySystemService$$SpringCGLIB$$0.reportHoursWorked(<generated>)
	at com.siemens.clock.kafka.CheckOutEventConsumer.handleLegacyReporting(CheckOutEventConsumer.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:475)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)
	at org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2887)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2865)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2777)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2614)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2503)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2152)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1528)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1466)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1335)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-11-03 13:45:37.949 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] DEBUG i.g.r.c.i.CircuitBreakerStateMachine - Event IGNORED_ERROR published: 2025-11-03T13:45:37.949243900+01:00[Europe/Berlin]: CircuitBreaker 'legacy-api' recorded an error which has been ignored: 'com.siemens.clock.exception.LegacySystemException: Legacy API returned: 503 SERVICE_UNAVAILABLE'. Elapsed time: 16 ms
2025-11-03 13:45:37.950 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] ERROR c.s.c.service.LegacySystemService - Fallback triggered for employee: i9j1k3l5, error: Legacy API returned: 503 SERVICE_UNAVAILABLE
2025-11-03 13:45:37.950 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  c.siemens.clock.service.DlqService - Sending to Legacy DLQ - Employee: i9j1k3l5, Error: Resilience fallback: Legacy API returned: 503 SERVICE_UNAVAILABLE
